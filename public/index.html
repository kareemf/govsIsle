<!DOCTYPE html>
<html ng-app="app">
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
            html { height: 100% }
            body { height: 100%; margin: 0; padding: 0 }
            .angular-google-map-container { height: 400px; }
            .gm-style-iw {top: 0 !important;}
        </style>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js"></script>
    </head>
    <body ng-controller="MapController">
        <!-- TODO: add main nav -->
        <google-map
            center="mapParams.center"
            zoom="mapParams.zoom"
            options="mapParams.options"
            events="mapParams.events"
            control="map"
            draggable='true'>

            <!-- also works -->
            <!-- <markers models="events" coords="'coords'"></markers> -->

            <marker ng-repeat="event in events" coords="event.coords" icon="event.icon">
                <marker-label content="event.name" anchor="22 0" class="marker-labels"/>
                <window ng-cloak  coords="event.coords" isIconVisibleOnClick="true" options="event.options">
                            <p>{{event.description}}</p>
                    </window>
            </marker>

            <!-- TODO: marker type filters -->
        </google-map>

        <div ng-controller="NewMarkerController">
            <div ng-repeat="marker in markers" ng-controller="NewEventController">
                <!-- TODO: proper input types -->
                <form ng-show="showForm" novalidate class="simple-form">
                    Name: <input type="text" ng-model="event.name" /><br />
                    Type: <input type="text" ng-model="event.type" /><br />
                    Desc: <input type="text" ng-model="event.description" /><br />
                    Vis: <input type="text" ng-model="event.visibility" /><br />
                    Setup: <input type="text" ng-model="event.setupDateTime" /><br />
                    Start: <input type="text" ng-model="event.startDateTime" /><br />
                    End: <input type="text" ng-model="event.endDateTime" /><br />
                    Cleanup: <input type="text" ng-model="event.cleanupDateTime" /><br />
                    Recurring?: <input type="checkbox" ng-model="event.isReccuring" /><br />
                    Head count: <input type="text" ng-model="event.anticipatedAttendance" /><br />
                    Location: <input type="text" ng-model="event.location" /> Find coords? <input type="checkbox" ng-model="lookupGeo" ng-change="lookupLocation = false" /><br />
                    Coords: <input type="text" ng-model="event.geoLocation" /> Find location? <input type="checkbox" ng-model="lookupLocation" ng-change="lookupGeo = false"/><br />
                    <span class="error">Error: {{error}}</span>
                    <button ng-click="save(event, marker)">Create</button>

                </form>
            </div>
        </div>

        <!-- TODO: display text list of markers -->
        <!-- TODO: event/marker detail page(s) -->


        <script type="text/javascript" src="bower_components/jquery/dist/jquery.js"></script>
        <script type="text/javascript" src="bower_components/lodash/dist/lodash.js"></script>
        <script type="text/javascript" src="bower_components/angular/angular.js"></script>
        <script type="text/javascript" src="bower_components/angular-resource/angular-resource.js"></script>
        <script type="text/javascript" src="bower_components/angular-google-maps/dist/angular-google-maps.js"></script>

        <script type="text/javascript" src="js/app.js"></script>


    </body>
</html>
